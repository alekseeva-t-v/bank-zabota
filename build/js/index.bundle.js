!function(){"use strict";var e={labelWelcome:document.querySelector(".nav__welcome"),labelDate:document.querySelector(".date"),labelBalance:document.querySelector(".balance__value"),labelSumIn:document.querySelector(".total__value--in"),labelSumOut:document.querySelector(".total__value--out"),labelSumInterest:document.querySelector(".total__value--interest"),labelTimer:document.querySelector(".timer"),containerMain:document.querySelector(".main__overlay"),containerTransactions:document.querySelector(".transactions"),btnLogin:document.querySelector(".login__btn"),btnTransfer:document.querySelector(".form__btn--transfer"),btnLoan:document.querySelector(".form__btn--loan"),btnClose:document.querySelector(".form__btn--close"),btnSort:document.querySelector(".btn--sort"),inputLoginUsername:document.querySelector(".login__input--user"),inputLoginPin:document.querySelector(".login__input--pin"),inputTransferTo:document.querySelector(".form__input--to"),inputTransferAmount:document.querySelector(".form__input--amount"),inputLoanAmount:document.querySelector(".form__input--loan-amount"),inputCloseUsername:document.querySelector(".form__input--user"),inputClosePin:document.querySelector(".form__input--pin"),logoImage:document.querySelector(".logo")};const n=[{userName:"Cecil Ireland",transactions:[500,250,-300,5e3,-850,-110,-170,1100],interest:1.5,pin:1111,transactionsDates:["2023-07-02T14:43:31.074Z","2023-07-29T11:24:19.761Z","2023-08-15T10:45:23.907Z","2023-09-22T12:17:46.255Z","2023-10-01T15:14:06.486Z","2023-10-04T11:42:26.371Z","2023-10-06T07:43:59.331Z","2023-10-07T15:21:20.814Z"],currency:"USD",locale:"en-US"},{userName:"Amani Salt",transactions:[2e3,6400,-1350,-70,-210,-2e3,5500,-30],interest:1.3,pin:2222,transactionsDates:["2020-10-02T14:43:31.074Z","2020-10-29T11:24:19.761Z","2020-11-15T10:45:23.907Z","2021-01-22T12:17:46.255Z","2021-02-12T15:14:06.486Z","2021-03-09T11:42:26.371Z","2021-05-21T07:43:59.331Z","2021-06-22T15:21:20.814Z"],currency:"UAH",locale:"uk-UA"},{userName:"Corey Martinez",transactions:[900,-200,280,300,-200,150,1400,-400],interest:.8,pin:3333,transactionsDates:["2020-10-02T14:43:31.074Z","2020-10-29T11:24:19.761Z","2020-11-15T10:45:23.907Z","2021-01-22T12:17:46.255Z","2021-02-12T15:14:06.486Z","2021-03-09T11:42:26.371Z","2021-05-21T07:43:59.331Z","2021-06-22T15:21:20.814Z"],currency:"RUB",locale:"ru-RU"},{userName:"Kamile Searle",transactions:[530,1300,500,40,190],interest:1,pin:4444,transactionsDates:["2020-10-02T14:43:31.074Z","2020-10-29T11:24:19.761Z","2020-11-15T10:45:23.907Z","2021-01-22T12:17:46.255Z","2021-02-12T15:14:06.486Z"],currency:"EUR",locale:"fr-CA"},{userName:"Oliver Avila",transactions:[630,800,300,50,120],interest:1.1,pin:5555,transactionsDates:["2020-10-02T14:43:31.074Z","2020-10-29T11:24:19.761Z","2020-11-15T10:45:23.907Z","2021-01-22T12:17:46.255Z","2021-02-12T15:14:06.486Z"],currency:"USD",locale:"en-US"}];let t,a=!1;function o(n,t=!1){e.containerTransactions.innerHTML="",(t?n.transactions.slice().sort(((e,n)=>e-n)):n.transactions).forEach(((t,a)=>{const o=`\n    <div class="transactions__row">\n      <div class="transactions__type transactions__type--${t>0?"deposit":"withdrawal"}">${a+1} ${t>0?"депозит":"вывод средств"}</div>\n      <div class="transactions__date">${function(e,n){const t=(a=new Date,o=e,Math.round(Math.abs((o-a)/864e5)));var a,o;return 0===t?"Сегодня":1===t?"Вчера":t<=4?`${t} дня назад`:t<=7?`${t} дней назад`:new Intl.DateTimeFormat(n).format(e)}(new Date(n.transactionsDates[a]),n.locale)}</div>\n      <div class="transactions__value">${t.toFixed(2)}</div>\n    </div>`;e.containerTransactions.insertAdjacentHTML("afterbegin",o)}))}function r(n){o(n),function(n){const t=n.transactions.reduce(((e,n)=>e+n),0);n.balance=t,e.labelBalance.innerHTML=`${t.toFixed(2)}₽`}(n),function(n){const t=n.transactions.filter((e=>e>0)).reduce(((e,n)=>e+n),0);e.labelSumIn.textContent=`${t.toFixed(2)}₽`;const a=n.transactions.filter((e=>e<0)).reduce(((e,n)=>e+n),0);e.labelSumOut.textContent=`${a.toFixed(2)}₽`;const o=n.transactions.filter((e=>e>0)).map((e=>e*n.interest/100)).filter((e=>e>=500)).reduce(((e,n)=>e+n),0);e.labelSumInterest.textContent=`${o.toFixed(2)}₽`}(n)}e.btnLogin.addEventListener("click",(a=>{if(a.preventDefault(),t=n.find((n=>n.nickName===e.inputLoginUsername.value)),t?.pin===Number(e.inputLoginPin.value)){const n=t.userName.split(" ")[0];e.labelWelcome.textContent=`Рады, что Вы снова с нами, ${n}`,e.containerMain.style.opacity="1",e.inputLoginUsername.value="",e.inputLoginPin.value="",e.inputLoginPin.blur(),r(t);const a=new Date,o={hour:"numeric",minute:"numeric",day:"numeric",month:"2-digit",year:"numeric",weekday:"long"},i=t.locale;e.labelDate.textContent=new Intl.DateTimeFormat(i,o).format(a)}})),e.btnTransfer.addEventListener("click",(a=>{a.preventDefault();const o=Number(e.inputTransferAmount.value),i=e.inputTransferTo.value,c=n.find((e=>e.nickName===i));e.inputTransferAmount.value="",e.inputTransferTo.value="",e.inputTransferAmount.blur(),o>0&&t.balance>=o&&c&&t.nickName!==c?.nickName&&(t.transactions.push(-o),t.transactionsDates.push((new Date).toISOString()),c.transactions.push(o),c.transactionsDates.push((new Date).toISOString()),r(t))})),e.btnClose.addEventListener("click",(a=>{if(a.preventDefault(),e.inputCloseUsername.value===t.nickName&&Number(e.inputClosePin.value)===t.pin){const a=n.findIndex((e=>e.pin===t.pin));n.splice(a,1),e.containerMain.style.opacity="0",e.labelWelcome.textContent="Войдите в свой аккаунт",e.inputClosePin.value="",e.inputCloseUsername.value=""}})),e.btnLoan.addEventListener("click",(n=>{n.preventDefault();const a=Math.floor(e.inputLoanAmount.value);a>0&&t.transactions.some((e=>e>=10*a/100))&&(t.transactions.push(a),t.transactionsDates.push((new Date).toISOString()),r(t),e.inputLoanAmount.value="")})),e.btnSort.addEventListener("click",(e=>{e.preventDefault(),o(t,!a),a=!a})),n.forEach((e=>{e.nickName=e.userName.toLowerCase().split(" ").map((e=>e[0])).join("")}));const i=n.flatMap((e=>e.transactions)).reduce(((e,n)=>e+n),0);console.log(i),e.logoImage.addEventListener("click",(()=>{[...document.querySelectorAll(".transactions__row")].forEach(((e,n)=>{n%2==0&&(e.style.background="rgba(68, 68, 68, 0.2)")}))}))}();